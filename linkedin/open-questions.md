# Открытые вопросы и нерешённые задачи

> Источник: экспорт ChatGPT (LinkedIn Profile Evaluation Engine project)
> Обновлён: 2026-02-27

---

## 5.1 Какую модель использовать для Score Engine

**Обсуждалось:**
- Нода настроена на `gpt-4o-mini` (Score Engine)
- Вопрос: "какую модель использовать?"

**Не зафиксировано формально.**

**Варианты:**
- Оставить `gpt-4o-mini` + строгие промпт-валидации + post-check code node
- Повысить до `gpt-4o` для большей стабильности

---

## 5.2 Extraction vs Scoring разделение

**Обсуждалось:**
- Score Engine должен работать одинаково для pdf/manual/link
- Score Engine использует ONLY `normalized_profile`

**Вывод:**
- Отдельный Extraction/Parser модуль должен извлекать headline/about/experience/skills из PDF или страницы
- Затем передавать в нормализацию
- Step 8 (Score Engine) — нельзя смешивать extraction и scoring

**Задача:** убедиться, что все ветки (PDF / fields / link) заполняют `normalized_profile` идентично перед попаданием в Score Engine.

---

## 5.3 Почему иногда ответ на английском при result_lang="ru"

**Обсуждалось:**
- Промпт содержал language rules, но модель иногда отвечала на EN
- Добавили "Language enforcement (hard)" block

**Гипотезы:**
- `user.content` отправляется как объект, а не строка JSON → модель интерпретирует иначе
- Item плавает (не всегда тот же вход при слиянии веток)
- В system prompt есть английские примеры → модель зеркалит язык входа

**Решение (частично зафиксировано):**
- Привести `user.content` к `={{ JSON.stringify(...) }}` всегда
- Использовать `.first()` для стабильного item
- Минимизировать английские примеры в system prompt

---

## 5.4 Нестабильный INSUFFICIENT_DATA ("через раз")

**Обсуждалось:**
- "Через раз с одними и теми же данными уходит в 'Недостаточно данных'"
- В v1/v1.2 была "too short rule" → нестабильна из-за пробелов/спецсимволов
- Убрана в v3: INSUFFICIENT_DATA только при отсутствующих headline/about/experience

**Техническая гипотеза:**
- Разные items / ветки workflow → в одном вызове `experience` пуст, в другом заполнен

**Задача:**
- Добавить pre-check code node (см. `artifacts/node-debug-presence.js`)
- Логировать presence flags: `headline_present`, `experience_is_array`, `experience_len`

---

## 5.5 notes в INSUFFICIENT_DATA должен быть конкретным

**Обсуждалось:**
- Пользователь: "notes: Недостаточно данных для оценки — почему?"
- Требование: `notes` должен перечислять `missing` конкретно, без воды

**Фиксация в v3:**
- `notes` = 1 короткое предложение на `result_lang`
- Должен объяснять конкретно, что отсутствует

**Открыто:**
- Нет тестового примера с INSUFFICIENT_DATA на русском языке — нужно проверить на реальных данных

---

## 5.6 Калибровка консервативного скора ("реалистично-пессимистичный")

**Обсуждалось:**
- Пользователь получил score=84 → посчитал завышенным
- Цель: "реалистично-пессимистичный вариант, чтобы число близкое к результату в LinkedIn"
- Не обесценивать paid

**Решение:**
- Консервативные cap'ы (cap 70 при слабой структуре, cap 85 free mode)
- Strict total = sum(subscores)

**Открыто:**
- Требуется формально определить разницу free vs paid caps
- Как обеспечить "похожесть" на LinkedIn Profile Strength (All-Star и т.п.) — отдельная логика

---

## 5.7 Telegram Summary: разбивка по разделам

**Обсуждалось:**
- Summary v1 JSON с массивами — неудобен
- Summary v2 (plain text) — решён

**Открыто:**
- Стоит ли возвращать "разбивку по разделам" в тексте (например "Сильнее всего: заголовок; слабее всего: опыт/навыки")?
- Это можно сделать без раскрытия детальной paid ценности, но решение не принято
